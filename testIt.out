

  TokenAgentFactory
    Deploy TokenAgentFactory And TokenAgent
        * accounts[0]->TokenAgentFactory.deploy() => 0x5FC8d326 - gasUsed: 5,108,994 0.005108994Ξ 12.77 USD @ 1.0 gwei 2500.00 ETH/USD
        * accounts[0]->tokenAgentFactory.newTokenAgent() => 0x23dB4a08 - gasUsed: 187,001 0.000187001Ξ 0.47 USD @ 1.0 gwei 2500.00 ETH/USD
        * accounts[1]->tokenAgentFactory.newTokenAgent() => 0x8EFa1819 - gasUsed: 189,801 0.000189801Ξ 0.47 USD @ 1.0 gwei 2500.00 ETH/USD
        * accounts[2]->tokenAgentFactory.newTokenAgent() => 0x6743E5c6 - gasUsed: 189,801 0.000189801Ξ 0.47 USD @ 1.0 gwei 2500.00 ETH/USD
        * accounts[3]->tokenAgentFactory.newTokenAgent() => 0xA14d9C7a - gasUsed: 189,801 0.000189801Ξ 0.47 USD @ 1.0 gwei 2500.00 ETH/USD
          Index Index by Owner tokenAgent Owner
          ----- -------------- ---------- ----------
              0              0 0x23dB4a08 0xf39Fd6e5
              1              0 0x8EFa1819 0x70997970
              2              0 0x6743E5c6 0x3C44CdDd
              3              0 0xA14d9C7a 0x90F79bf6
        * now: 12:14:44 PM, expiry: 12:16:44 PM

            # Account                         ETH          WETH 0x5FbDB231        ERC-20 0xe7f1725E                 ERC-721 0x9fE46736                ERC-1155 0xCf7Ed3Ac
          --- ---------- ------------------------ ------------------------ ------------------------ ---------------------------------- ----------------------------------
            0 0xf39Fd6e5  9899.974581354249334923                    100.0                   1000.0                         0, 1, 2, 3             0:10, 1:10, 2:10, 3:10
            1 0x70997970  9899.998937260472725682                    100.0                   1000.0                         4, 5, 6, 7             0:20, 1:20, 2:20, 3:20
            2 0x3C44CdDd   9899.99895259990149887                    100.0                   1000.0                       8, 9, 10, 11             0:30, 1:30, 2:30, 3:30
            3 0x90F79bf6  9899.998964275135980206                    100.0                   1000.0                     12, 13, 14, 15             0:40, 1:40, 2:40, 3:40

        * offers1: ["0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0,0,1725848204,4,100000000000000000,,","0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0,1,1725848204,4,100000000000000000,4,5,6,7,","0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0,1,1725848204,4,100000000000000000,200000000000000000,300000000000000000,400000000000000000,4,5,6,7,"]
        * accounts[1]->tokenAgents[1].addOffers(offers1) => [0, 1, 2] - gasUsed: 447,981 0.000447981Ξ 1.12 USD @ 1.0 gwei 2500.00 ETH/USD
          + tokenAgents[1].Offered(index:0, maker: 0x70997970, token: 0x9fE46736, tokenType: 721, buySell: BUY, expiry: 12:16:44 PM, count: 4, nonce: 0, prices: [0.1], tokenIds: [], tokenss: [], timestamp: 12:16:28 PM)
          + tokenAgents[1].Offered(index:1, maker: 0x70997970, token: 0x9fE46736, tokenType: 721, buySell: SELL, expiry: 12:16:44 PM, count: 4, nonce: 0, prices: [0.1], tokenIds: [4,5,6,7], tokenss: [], timestamp: 12:16:28 PM)
          + tokenAgents[1].Offered(index:2, maker: 0x70997970, token: 0x9fE46736, tokenType: 721, buySell: SELL, expiry: 12:16:44 PM, count: 4, nonce: 0, prices: [0.1,0.2,0.3,0.4], tokenIds: [4,5,6,7], tokenss: [], timestamp: 12:16:28 PM)

            # Account                         ETH          WETH 0x5FbDB231        ERC-20 0xe7f1725E                 ERC-721 0x9fE46736                ERC-1155 0xCf7Ed3Ac
          --- ---------- ------------------------ ------------------------ ------------------------ ---------------------------------- ----------------------------------
            0 0xf39Fd6e5  9899.974581354249334923                    100.0                   1000.0                         0, 1, 2, 3             0:10, 1:10, 2:10, 3:10
            1 0x70997970  9899.998489278967851095                    100.0                   1000.0                         4, 5, 6, 7             0:20, 1:20, 2:20, 3:20
            2 0x3C44CdDd   9899.99895259990149887                    100.0                   1000.0                       8, 9, 10, 11             0:30, 1:30, 2:30, 3:30
            3 0x90F79bf6  9899.998964275135980206                    100.0                   1000.0                     12, 13, 14, 15             0:40, 1:40, 2:40, 3:40

          tokenAgents[1] Offers
            # Token      Type B/S  Expiry       Count Nonce                         Prices                       TokenIds                        Tokenss                          Useds
          --- ---------- ---- ---- ------------ ----- ----- ------------------------------ ------------------------------ ------------------------------ ------------------------------
            0 0x9fE46736 721  BUY  12:16:44 PM      4     0                           0.10                                                                                             
            1 0x9fE46736 721  SELL 12:16:44 PM      4     0                           0.10                     4, 5, 6, 7                                                              
            2 0x9fE46736 721  SELL 12:16:44 PM      4     0         0.10, 0.20, 0.30, 0.40                     4, 5, 6, 7                                                              

        * trades1: [[0,"400000000000000000",1,[8,9,10,11]]]
        * accounts[2]->tokenAgents[1].trade(trades1, true) - gasUsed: 168,609 0.000168609Ξ 0.42 USD @ 1.0 gwei 2500.00 ETH/USD
          + erc721Token.Approval(from: 0x3C44CdDd, to: 0x00000000, tokenId: 8)
          + erc721Token.Transfer(from: 0x3C44CdDd, to: 0x70997970, tokenId: 8)
          + erc721Token.Approval(from: 0x3C44CdDd, to: 0x00000000, tokenId: 9)
          + erc721Token.Transfer(from: 0x3C44CdDd, to: 0x70997970, tokenId: 9)
          + erc721Token.Approval(from: 0x3C44CdDd, to: 0x00000000, tokenId: 10)
          + erc721Token.Transfer(from: 0x3C44CdDd, to: 0x70997970, tokenId: 10)
          + erc721Token.Approval(from: 0x3C44CdDd, to: 0x00000000, tokenId: 11)
          + erc721Token.Transfer(from: 0x3C44CdDd, to: 0x70997970, tokenId: 11)
          + weth.Transfer(from: 0x70997970, to: 0x8EFa1819, tokens: 0.4)
          + weth.Withdrawal(0x8EFa1819Ff5B279077368d44B593a4543280e402, 400000000000000000)
          + tokenAgents[1].Traded(index:0, taker: 0x3C44CdDd, maker: 0x70997970, token: 0x9fE46736, tokenType: 721, makerBuySell: BUY, prices: [0.1,0.1,0.1,0.1], tokenIds: [8,9,10,11], tokenss: [], price: 0.4, timestamp: 12:16:29 PM)

            # Account                         ETH          WETH 0x5FbDB231        ERC-20 0xe7f1725E                 ERC-721 0x9fE46736                ERC-1155 0xCf7Ed3Ac
          --- ---------- ------------------------ ------------------------ ------------------------ ---------------------------------- ----------------------------------
            0 0xf39Fd6e5  9899.974581354249334923                    100.0                   1000.0                         0, 1, 2, 3             0:10, 1:10, 2:10, 3:10
            1 0x70997970  9899.998489278967851095                     99.6                   1000.0           4, 5, 6, 7, 8, 9, 10, 11             0:20, 1:20, 2:20, 3:20
            2 0x3C44CdDd  9900.398783990734407351                    100.0                   1000.0                                                0:30, 1:30, 2:30, 3:30
            3 0x90F79bf6  9899.998964275135980206                    100.0                   1000.0                     12, 13, 14, 15             0:40, 1:40, 2:40, 3:40

          tokenAgents[1] Offers
            # Token      Type B/S  Expiry       Count Nonce                         Prices                       TokenIds                        Tokenss                          Useds
          --- ---------- ---- ---- ------------ ----- ----- ------------------------------ ------------------------------ ------------------------------ ------------------------------
            0 0x9fE46736 721  BUY  12:16:44 PM      0     0                           0.10                                                                                             
            1 0x9fE46736 721  SELL 12:16:44 PM      4     0                           0.10                     4, 5, 6, 7                                                              
            2 0x9fE46736 721  SELL 12:16:44 PM      4     0         0.10, 0.20, 0.30, 0.40                     4, 5, 6, 7                                                              

      ✔ Test TokenAgent ERC-721 offers and trades (832ms)


  1 passing (834ms)

